# For advice on how to change settings please see
# http://dev.mysql.com/doc/refman/5.7/en/server-configuration-defaults.html
# *** DO NOT EDIT THIS FILE. It's a template which will be copied to the
# *** default location during install, and will be replaced if you
# *** upgrade to a newer version of MySQL.

[mysqld]
log_bin
server-id=1
gtid_mode=ON
enforce_gtid_consistency=1
auto_increment_offset = 1 
auto_increment_increment = 2 

slow_query_log=ON
slow_query_log_file=/usr/local/mysql/data/slow.log
long_query_time=2

basedir=/usr/local/mysql
datadir=/data/3306/data
socket=/data/3306/mysql.sock
#log-error = /var/log/mysql/error.log


innodb_buffer_pool_size = 8G
innodb_buffer_pool_dump_pct = 40
innodb_page_cleaners = 4
innodb_undo_log_truncate = 1
innodb_purge_rseg_truncate_frequency = 128
log_timestamps=system
show_compatibility_56=on

symbolic-links=0
character_set_server=utf8
sql_mode=NO_ENGINE_SUBSTITUTION,STRICT_TRANS_TABLES  ## 第一个参数 指定引擎操作SQL语句，若该MySQL不支持此引擎则直接报错，不会替换成默认引擎执行；第二个严格检查SQL的正确性，若规定四个字符长度，插入6个会报错，不会自动截断。
max_connections=5000
tmp_table_size=200M
query_cache_size=64M
query_cache_type=1
max_error_count=5000

# slave 并行复制（mysql>5.7）
slave-parallel-type=LOGICAL_CLOCK  #基于组提交的并行复制方式
slave-parallel-workers=16
master_info_repository=TABLE 
relay_log_info_repository=TABLE
relay_log_recovery=ON

[client]
socket=/data/3306/mysql.sock
